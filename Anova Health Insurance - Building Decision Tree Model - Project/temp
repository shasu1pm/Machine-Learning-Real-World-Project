# ============================================================
# ğŸ¥ Anova Health Insurance - Building Decision Tree Model
# ğŸŒ³ Decision Tree | Explainable Machine Learning
# ============================================================

Project:
  Name: ğŸ¥ Anova Insurance Health Risk Prediction
  Domain: ğŸ’¼ Health Insurance | ğŸ“Š Risk Analytics
  Model_type: ğŸ¤– Supervised Machine Learning
  Task: ğŸ§© Binary Classification
  Algorithm: ğŸŒ³ Decision Tree
  Explainability: ğŸ” High (Business-friendly rules)

Overview:
  Business_context:
    Description: >
      ğŸ¢ Anova Insurance aims to optimize health insurance eligibility
      and premium pricing decisions by understanding applicant health risk.
    Key_decisions:
      - âœ… Insurance eligibility approval
      - ğŸ’° Premium pricing (standard vs risk-adjusted)
    Risk_focus:
      - ğŸš« Avoid underpricing high-risk applicants
      - ğŸ¯ Reduce false negatives (Unhealthy predicted as Healthy)

Problem_statement:
  Objective: >
    ğŸ¯ Build a predictive model that classifies individuals as
    Healthy (0) or Unhealthy (1) using health, lifestyle,
    and medical data.
  Why_it_matters:
    Healthy:
      Impact: ğŸŸ¢ Lower claim risk
      Action: ğŸ’¸ Standard or discounted premium
    Unhealthy:
      Impact: ğŸ”´ Higher claim risk
      Action: âš ï¸ Risk-adjusted premium or medical review

Dataset:
  Source: ğŸ—‚ï¸ Anova Insurance (Synthetic / Training Dataset)
  Shape:
    Rows: 10000
    Columns: 20
  Target_variable:
    Name: ğŸ¯ Target
    Mapping:
      0: ğŸŸ¢ Healthy
      1: ğŸ”´ Unhealthy
  Data_challenges:
    - â— Missing values (especially for older individuals)
    - âŒ Negative age values
    - ğŸ”„ Mixed feature types (numeric, ordinal, nominal)

Features:
  Numerical:
    - ğŸ‚ Age
    - âš–ï¸ BMI
    - ğŸ’‰ Blood_Pressure
    - ğŸ§ª Cholesterol
    - ğŸ¬ Glucose_Level
    - â¤ï¸ Heart_Rate
    - ğŸ˜´ Sleep_Hours
    - ğŸƒ Exercise_Hours
    - ğŸš° Water_Intake
    - ğŸ˜– Stress_Level

  Ordinal_categorical_0_1_2:
    - ğŸš¬ Smoking
    - ğŸº Alcohol
    - ğŸ¥— Diet
    - ğŸ§  MentalHealth
    - ğŸ‹ï¸ PhysicalActivity
    - ğŸ¥ MedicalHistory
    - ğŸ¤§ Allergies

  Nominal_categorical:
    - ğŸ½ï¸ Diet_Type: [Vegetarian, Non-Vegetarian, Vegan]
    - ğŸ©¸ Blood_Group: [A, B, AB, O]

ML_Objective:
  Task_type: ğŸ§  Classification
  Prediction:
    Output:
      0: ğŸŸ¢ Healthy
      1: ğŸ”´ Unhealthy
  Evaluation_priority:
    Primary: ğŸ¯ Recall (Unhealthy)
    Reason: >
      âš ï¸ False Negatives cause underpriced high-risk policies,
      which is financially dangerous for insurers.

Workflow:
  Step_1:
    Name: ğŸ“¥ Data Ingestion
    Actions:
      - ğŸ“‚ Load dataset
      - ğŸ” Validate shape and schema
      - âœ… Verify target values âˆˆ {0,1}

  Step_2:
    Name: ğŸ” Exploratory Data Analysis (EDA)
    Actions:
      - ğŸ“Š Target distribution check
      - ğŸ“ˆ Numeric feature statistics
      - ğŸ§© Missing value analysis
      - ğŸ”— Correlation with target
      - ğŸ“Œ Category frequency analysis
    Outputs:
      - ğŸ’¡ Risk indicator hypotheses
      - ğŸ§  Data quality insights

  Step_3:
    Name: ğŸ§¹ Data Cleaning
    Actions:
      - âŒ Convert negative ages â†’ NaN
      - ğŸš« Remove impossible values (BMI â‰¤ 0, invalid sleep hours)
      - ğŸ› ï¸ Handle missing values:
          numerical: median
          ordinal: mode
          nominal: mode / "Unknown"

  Step_4:
    Name: ğŸ—ï¸ Feature Engineering
    Actions:
      - ğŸ”¢ Preserve ordinal ordering (0 < 1 < 2)
      - ğŸ§© One-hot encode nominal features
      - âœ¨ Optional domain features:
          - âš–ï¸ BMI category
          - ğŸ’‰ Blood pressure category
          - ğŸ§¬ Lifestyle risk score

  Step_5:
    Name: ğŸ”€ Train-Test Split
    Config:
      split_ratio: 80/20
      stratify: Target
      random_state: ğŸ” Fixed

  Step_6:
    Name: ğŸŒ± Baseline Decision Tree
    Purpose: ğŸ§ª Establish reference performance
    Config:
      random_state: ğŸ” Fixed
      max_depth: Default

  Step_7:
    Name: ğŸ›ï¸ Hyperparameter Tuning
    Focus: ğŸ›¡ï¸ Prevent overfitting
    Tuned_parameters:
      - ğŸŒ³ max_depth
      - ğŸ”€ min_samples_split
      - ğŸƒ min_samples_leaf
      - âš–ï¸ class_weight
    Strategy:
      - ğŸ” GridSearchCV / RandomizedSearchCV
      - ğŸ¯ Optimize recall for Unhealthy class

  Step_8:
    Name: ğŸ“ Model Evaluation
    Technical_metrics:
      - ğŸ“‰ Confusion Matrix
      - ğŸ“Š Accuracy
      - ğŸ¯ Precision (Unhealthy)
      - ğŸš¨ Recall (Unhealthy)
      - ğŸ§® F1-score
      - ğŸ“ˆ ROC-AUC
    Insurance_lens:
      - ğŸš« Track False Negatives explicitly
      - ğŸ”§ Adjust thresholds if required

  Step_9:
    Name: ğŸ” Model Interpretability
    Outputs:
      - â­ Feature importance ranking
      - ğŸŒ³ Decision tree visualization
      - ğŸ—£ï¸ Human-readable IFâ€“THEN rules
    Example_rule: >
      IF ğŸ¬ Glucose_Level is high AND ğŸ¥ MedicalHistory is severe
      THEN applicant is ğŸ”´ Unhealthy

  Step_10:
    Name: ğŸ§® Risk Banding & Premium Mapping
    Method: ğŸ“Š Probability-based (Recommended)
    Risk_bands:
      Low:
        condition: p(Unhealthy) < 0.30
        action: ğŸ’¸ Standard / Discount premium
      Medium:
        condition: 0.30 â‰¤ p < 0.60
        action: âš ï¸ Caution / Mild loading
      High:
        condition: p â‰¥ 0.60
        action: ğŸš‘ Higher premium / Medical review

Deployment_readiness:
  usage_notes:
    - ğŸ¤ Model supports decisions, not final approval
    - ğŸ‘©â€âš–ï¸ Underwriters retain authority
  Monitoring:
    - ğŸ“‰ Track prediction drift
    - ğŸš¨ Review false negative trends
    - ğŸ” Periodic retraining recommended

Success_criteria:
  Technical:
    - ğŸ¯ Strong recall for Unhealthy
    - ğŸ“ˆ Stable ROC-AUC
    - ğŸ›¡ï¸ Controlled overfitting
  Business:
    - ğŸ’° Better premium differentiation
    - ğŸ” Reduced underwriting risk
    - ğŸ” Explainable and auditable decisions

Deliverables:
  - ğŸ“‚ Cleaned dataset
  - ğŸ“Š EDA insights
  - ğŸŒ³ Trained Decision Tree model
  - ğŸ“ Evaluation metrics
  - ğŸ§  Interpretable rules
  - ğŸ’¸ Risk band & premium mapping logic
  - ğŸš€ Deployment-ready notebook

Next_improvements:
  - ğŸŒ² Random Forest / âš¡ Gradient Boosting comparison
  - ğŸ¯ Probability calibration
  - âš–ï¸ Bias & fairness checks
